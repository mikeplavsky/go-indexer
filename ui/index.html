<!DOCTYPE html>
<html ng-app='myApp'>
<head>
  <title>Application Title</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes">

  <script src='./js/cui-vendor.min.js'></script>
  <script src='./js/cui.min.js'></script>

  <link rel="stylesheet" href="./css/cui.min.css">
</head>

<body ng-controller='AppController'>

<cui-application-frame 
    
    application-name='Logs Indexer' 
    navigation-items='applicationframe.navigation' 
    masthead-show-controls=true>


  <div cui-controls>
  <!-- cui-controls contains any items that should appear in the application frame heading bar-->

   <cui-button ng-click='showAboutBox()' ng-controller='AboutBoxCtrl'>
       <cui-icon icon='question-sign'></cui-icon> About Box
   </cui-button>

  </div>

  <div cui-content>
  <!-- cui-content contains any content that should appear in the main part of the application-->


    <div class='cui-grid'>
        

      <cui-pane class='cui-unit cui-one-quarter' 
                cui-title='Logs' icon='file'>

        <div ng-include="'job.html'"></div>

      </cui-pane>
    </div>

  </div>

</cui-application-frame>

<script>

  angular.module('myApp', ['cui'])
  .controller('AppController', function($scope, 
                             cuiDataSourceService,
                             cuiAlertService,
                             cuiLoading) {

        $scope.applicationframe = {};

        $scope.job = {}

        $scope.calculate = function(){

            srv = cuiDataSourceService('/api/job');

            cuiLoading(
            
            srv.query($scope.job)
            .then(function(res){

                $scope.job.count = res.count;
                $scope.job.size = res.size;

            },
            function(err){
                cuiAlertService.warning(err);
            })
            
            );


        }

  }).
  controller('AboutBoxCtrl', function($scope, cuiAboutBox){

        var aboutBox = cuiAboutBox(
            {applicationName: 'Logs Indexer'}
        );

        $scope.showAboutBox = aboutBox.modal.show;

  });

</script>
</body>
</html>
